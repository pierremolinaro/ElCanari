//--- START OF USER ZONE 1


//--- END OF USER ZONE 1

//——————————————————————————————————————————————————————————————————————————————————————————————————————————————————————
//  THIS FILE IS REGENERATED BY EASY BINDINGS, ONLY MODIFY IT WITHIN USER ZONES
//——————————————————————————————————————————————————————————————————————————————————————————————————————————————————————

import Cocoa

//——————————————————————————————————————————————————————————————————————————————————————————————————————————————————————

extension ProjectDocument {
  @objc func addNetClassAction (_ sender : NSObject?) {
//--- START OF USER ZONE 2
    if let window = self.windowForSheet, let panel = self.mAddNetClassPanel {
      self.mAddNetClassTextField?.target = self
      self.mAddNetClassTextField?.action = #selector (ProjectDocument.newClassNameTextFieldDidChange (_:))
      self.mAddNetClassTextField?.isContinuous = true
      self.mAddNetClassTextField?.setSendContinously (true)
      self.newClassNameTextFieldDidChange (nil)
      window.beginSheet (panel) { (_ inResponse : NSApplication.ModalResponse) in
        if inResponse == .stop, let newNetClassName = self.mAddNetClassTextField?.stringValue {
          let netClass = NetClassInProject (self.ebUndoManager)
          netClass.mNetClassName = newNetClassName
          self.rootObject.mNetClasses.append (netClass)
          self.mNetClassController.setSelection ([netClass])
        }
      }
    }
  }

  @objc fileprivate func newClassNameTextFieldDidChange (_ inSender : NSObject?) {
    if let newNetClassName = self.mAddNetClassTextField?.stringValue {
      self.mAddNetClassValidationButton?.isEnabled = newNetClassName != ""
      if newNetClassName == "" {
        self.mAddNetClassErrorMessageTextField?.stringValue = "New Net Class name is empty."
      }else{
        var newNameIsUnique = true
        for netClass in self.rootObject.mNetClasses {
          if netClass.mNetClassName == newNetClassName {
            newNameIsUnique = false
          }
        }
        self.mAddNetClassValidationButton?.isEnabled = newNameIsUnique
        self.mAddNetClassErrorMessageTextField?.stringValue = newNameIsUnique
          ? ""
          : "New Net Class name already exists."
      }
    }
//--- END OF USER ZONE 2
  }
}

//——————————————————————————————————————————————————————————————————————————————————————————————————————————————————————
