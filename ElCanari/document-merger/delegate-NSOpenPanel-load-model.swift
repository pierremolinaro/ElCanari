//
//  delegate-NSOpenPanel.swift
//  ElCanari
//
//  Created by Pierre Molinaro on 30/06/2018.
//
//
//——————————————————————————————————————————————————————————————————————————————————————————————————————————————————————

import Cocoa

//——————————————————————————————————————————————————————————————————————————————————————————————————————————————————————

fileprivate var gPanel : OpenPanelDelegateForFilteringBoardModels?

//——————————————————————————————————————————————————————————————————————————————————————————————————————————————————————

class OpenPanelDelegateForFilteringBoardModels : EBSimpleClass, NSOpenSavePanelDelegate {

  //····················································································································
  //   PROPERTIES
  //····················································································································

  let mBoardModelNames : [String]

  //····················································································································
  //   INIT
  //····················································································································

  init (_ boardModelNames : [String]) {
    mBoardModelNames = boardModelNames
    super.init ()
    gPanel = self // MANDATORY! This object is set to NSOpenPanel delegate that DOES NOT retain it
  }

  //····················································································································
  //   DELEGATE METHOD
  //····················································································································

  func panel (_ sender: Any, shouldEnable url: URL) -> Bool {
    let fileName = url.path.lastPathComponent.deletingPathExtension
    // NSLog ("\(fileName)")
    return mBoardModelNames.index (of:fileName) == nil
  }

  //····················································································································

}

//——————————————————————————————————————————————————————————————————————————————————————————————————————————————————————

func releaseOpenPanelDelegateForFilteringBoardModels () {
  gPanel = nil
}

//——————————————————————————————————————————————————————————————————————————————————————————————————————————————————————
